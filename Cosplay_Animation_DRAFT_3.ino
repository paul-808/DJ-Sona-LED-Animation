
// Cosplay Controller
// By Paul Jarvey
// Sept 1, 2016
// Note: contains plasma generator by Edmund "Skorn" Horn
// face = leds 0-384
// OctoWS2811Lib + OctoWS2811 Shield + FFT

// LIBRARY DEFINITIONS
#include <OctoWS2811.h>
//OctoWS2811 Defn. Stuff
#define COLS_LEDs 26  // all of the following params need to be adjusted for screen size
#define ROWS_LEDs 32  // LED_LAYOUT assumed 0 if ROWS_LEDs > 8
#define LEDS_PER_STRIP 384
DMAMEM int displayMemory[LEDS_PER_STRIP*6];
int drawingMemory[LEDS_PER_STRIP*6];
const int config = WS2811_GRB | WS2811_800kHz;
OctoWS2811 leds(LEDS_PER_STRIP, displayMemory, drawingMemory, config);



//Byte val 2PI Cosine Wave, offset by 1 PI 
//supports fast trig calcs and smooth LED fading/pulsing.
uint8_t const cos_wave[256] PROGMEM =  
{0,0,0,0,1,1,1,2,2,3,4,5,6,6,8,9,10,11,12,14,15,17,18,20,22,23,25,27,29,31,33,35,38,40,42,
45,47,49,52,54,57,60,62,65,68,71,73,76,79,82,85,88,91,94,97,100,103,106,109,113,116,119,
122,125,128,131,135,138,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,
189,191,194,197,199,202,204,207,209,212,214,216,218,221,223,225,227,229,231,232,234,236,
238,239,241,242,243,245,246,247,248,249,250,251,252,252,253,253,254,254,255,255,255,255,
255,255,255,255,254,254,253,253,252,252,251,250,249,248,247,246,245,243,242,241,239,238,
236,234,232,231,229,227,225,223,221,218,216,214,212,209,207,204,202,199,197,194,191,189,
186,183,180,177,174,171,168,165,162,159,156,153,150,147,144,141,138,135,131,128,125,122,
119,116,113,109,106,103,100,97,94,91,88,85,82,79,76,73,71,68,65,62,60,57,54,52,49,47,45,
42,40,38,35,33,31,29,27,25,23,22,20,18,17,15,14,12,11,10,9,8,6,6,5,4,3,2,2,1,1,1,0,0,0,0
};

//Gamma Correction Curve
uint8_t const exp_gamma[256] PROGMEM =
{0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,
4,4,4,4,4,5,5,5,5,5,6,6,6,7,7,7,7,8,8,8,9,9,9,10,10,10,11,11,12,12,12,13,13,14,14,14,15,15,
16,16,17,17,18,18,19,19,20,20,21,21,22,23,23,24,24,25,26,26,27,28,28,29,30,30,31,32,32,33,
34,35,35,36,37,38,39,39,40,41,42,43,44,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,
61,62,63,64,65,66,67,68,70,71,72,73,74,75,77,78,79,80,82,83,84,85,87,89,91,92,93,95,96,98,
99,100,101,102,105,106,108,109,111,112,114,115,117,118,120,121,123,125,126,128,130,131,133,
135,136,138,140,142,143,145,147,149,151,152,154,156,158,160,162,164,165,167,169,171,173,175,
177,179,181,183,185,187,190,192,194,196,198,200,202,204,207,209,211,213,216,218,220,222,225,
227,229,232,234,236,239,241,244,246,249,251,253,254,255
};

// reference array (faceplate LED locations, using a dual array, format [y][x], where 0,0 is the bottom-left position

uint16_t location[16][24] = {   
{14,15,46,47,78,79,110,111,142,143,174,175,206,207,238,239,375,376,377,378,379,380,381,382},
{13,16,45,48,77,80,109,112,141,144,173,176,205,208,237,240,374,373,372,371,370,369,368,367},
{12,17,44,49,76,81,108,113,140,145,172,177,204,209,236,241,359,360,361,362,363,364,365,366},
{11,18,43,50,75,82,107,114,139,146,171,178,203,210,235,242,358,357,356,355,354,353,352,351},
{10,19,42,51,74,83,106,115,138,147,170,179,202,211,234,243,343,344,345,346,347,348,349,350},
{9,20,41,52,73,84,105,116,137,148,169,180,201,212,233,244,342,341,340,339,338,337,336,335},
{8,21,40,53,72,85,104,117,136,149,168,181,200,213,232,245,327,328,329,330,331,332,333,334},
{7,22,39,54,71,86,103,118,135,150,167,182,199,214,231,246,326,325,324,323,322,321,320,319},
{6,23,38,55,70,87,102,119,134,151,166,183,198,215,230,247,311,312,313,314,315,316,317,318},
{5,24,37,56,69,88,101,120,133,152,165,184,197,216,229,248,310,309,308,307,306,305,304,303},
{4,25,36,57,68,89,100,121,132,153,164,185,196,217,228,249,295,296,297,298,299,300,301,302},
{3,26,35,58,67,90,99,122,131,154,163,186,195,218,227,250,294,293,292,291,290,289,288,287},
{2,27,34,59,66,91,98,123,130,155,162,187,194,219,226,251,279,280,281,282,283,284,285,286},
{1,28,33,60,65,92,97,124,129,156,161,188,193,220,225,252,278,277,276,275,274,273,272,271},
{0,29,32,61,64,93,96,125,128,157,160,189,192,221,224,253,263,264,265,266,267,268,269,270},
{0,30,31,62,63,94,95,126,127,158,159,190,191,222,223,254,262,261,260,259,258,257,256,255}};

// reference array defining the columns in which the bars occur. [0][0-7] is the first....

uint8_t blueLocation[3][8] = {  
  {1,2,3,4,5,6},
  {8,9,10,11,12,13,14,15},
  {17,18,19,20,21,22}};

// reference array defining teal fade for blue bar animation  
uint8_t blueFader[56][3] = {  
  {120,255,255},
  {120,255,255},
  {113,239,239},
  {105,224,224},
  {99,210,210},
  {93,197,197},
  {87,185,185},
  {81,173,173},
  {76,162,162},
  {72,152,152},
  {67,143,143},
  {63,134,134},
  {59,125,125},
  {55,118,118},
  {52,110,110},
  {49,103,103},
  {46,97,97},
  {43,91,91},
  {40,85,85},
  {38,80,80},
  {35,75,75},
  {33,70,70},
  {31,66,66},
  {29,62,62},
  {27,58,58},
  {25,54,54},
  {24,51,51},
  {22,48,48},
  {21,45,45},
  {20,42,42},
  {18,39,39},
  {17,37,37},
  {16,34,34},
  {15,32,32},
  {14,30,30},
  {13,28,28},
  {13,27,27},
  {12,25,25},
  {11,23,23},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22},
  {10,22,22}};


uint8_t blueBackground[16][3] = {  
  {12,26,26},
  {6,13,13},
  {0,2,0},
  {0,2,0},
  {0,3,1},
  {0,3,1},
  {0,4,2},
  {0,6,3},
  {0,8,4},
  {0,10,5},
  {0,15,8},
  {0,21,10},
  {0,25,14},
  {0,30,17},
  {0,35,20},
  {0,40,50}};

uint8_t blueForeground[16][3] = {  
  {120,255,255},
  {12,215,255},
  {0,207,245},
  {0,200,235},
  {0,195,226},
  {0,187,217},
  {0,181,208},
  {0,175,200},
  {0,169,192},
  {0,164,184},
  {0,159,177},
  {0,159,170},
  {0,149,163},
  {0,145,156},
  {0,140,150},
  {0,136,144}};

uint8_t columnOffset[2][24] = {    
  {0,3,12,26,44,64,86,106,124,138,147,150,150,147,138,124,106,86,64,44,26,12,3,0}, // sin-based column offset for purple() 
  {1,1,2,2,3,4,5,6,7,7,7,7,7,7,7,7,6,5,4,3,2,2,1,1}};  // chance of glitter for purple() 

uint8_t purpleFader[300][3] = {
{128,0,200},
{127,2,201},
{125,4,201},
{124,6,202},
{123,8,202},
{122,10,203},
{120,12,203},
{119,14,204},
{118,16,204},
{116,18,205},
{115,21,206},
{114,23,206},
{113,25,207},
{111,27,207},
{110,29,208},
{109,31,208},
{108,33,209},
{106,35,209},
{105,37,210},
{104,39,210},
{102,41,211},
{101,43,212},
{100,45,212},
{99,47,213},
{97,49,213},
{96,51,214},
{95,53,214},
{93,55,215},
{92,57,215},
{91,59,216},
{90,62,217},
{88,64,217},
{87,66,218},
{86,68,218},
{84,70,219},
{83,72,219},
{82,74,220},
{81,76,220},
{79,78,221},
{78,80,221},
{77,82,222},
{76,84,223},
{74,86,223},
{73,88,224},
{72,90,224},
{70,92,225},
{69,94,225},
{68,96,226},
{67,98,226},
{65,100,227},
{64,103,228},
{63,105,228},
{61,107,229},
{60,109,229},
{59,111,230},
{58,113,230},
{56,115,231},
{55,117,231},
{54,119,232},
{52,121,232},
{51,123,233},
{50,125,234},
{49,127,234},
{47,129,235},
{46,131,235},
{45,133,236},
{44,135,236},
{42,137,237},
{41,139,237},
{40,141,238},
{38,144,239},
{37,146,239},
{36,148,240},
{35,150,240},
{33,152,241},
{32,154,241},
{31,156,242},
{29,158,242},
{28,160,243},
{27,162,243},
{26,164,244},
{24,166,245},
{23,168,245},
{22,170,246},
{20,172,246},
{19,174,247},
{18,176,247},
{17,178,248},
{15,180,248},
{14,182,249},
{13,185,250},
{12,187,250},
{10,189,251},
{9,191,251},
{8,193,252},
{6,195,252},
{5,197,253},
{4,199,253},
{3,201,254},
{1,203,254},
{0,205,255},
{0,203,255},
{0,201,255},
{0,199,255},
{0,197,255},
{0,195,255},
{0,193,255},
{0,191,255},
{0,189,255},
{0,187,255},
{0,185,255},
{0,182,255},
{0,180,255},
{0,178,255},
{0,176,255},
{0,174,255},
{0,172,255},
{0,170,255},
{0,168,255},
{0,166,255},
{0,164,255},
{0,162,255},
{0,160,255},
{0,158,255},
{0,156,255},
{0,154,255},
{0,152,255},
{0,150,255},
{0,148,255},
{0,146,255},
{0,144,255},
{0,141,255},
{0,139,255},
{0,137,255},
{0,135,255},
{0,133,255},
{0,131,255},
{0,129,255},
{0,127,255},
{0,125,255},
{0,123,255},
{0,121,255},
{0,119,255},
{0,117,255},
{0,115,255},
{0,113,255},
{0,111,255},
{0,109,255},
{0,107,255},
{0,105,255},
{0,103,255},
{0,100,255},
{0,98,255},
{0,96,255},
{0,94,255},
{0,92,255},
{0,90,255},
{0,88,255},
{0,86,255},
{0,84,255},
{0,82,255},
{0,80,255},
{0,78,255},
{0,76,255},
{0,74,255},
{0,72,255},
{0,70,255},
{0,68,255},
{0,66,255},
{0,64,255},
{0,62,255},
{0,59,255},
{0,57,255},
{0,55,255},
{0,53,255},
{0,51,255},
{0,49,255},
{0,47,255},
{0,45,255},
{0,43,255},
{0,41,255},
{0,39,255},
{0,37,255},
{0,35,255},
{0,33,255},
{0,31,255},
{0,29,255},
{0,27,255},
{0,25,255},
{0,23,255},
{0,21,255},
{0,18,255},
{0,16,255},
{0,14,255},
{0,12,255},
{0,10,255},
{0,8,255},
{0,6,255},
{0,4,255},
{0,2,255},
{0,0,255},
{1,0,254},
{3,0,254},
{4,0,253},
{5,0,253},
{6,0,252},
{8,0,252},
{9,0,251},
{10,0,251},
{12,0,250},
{13,0,250},
{14,0,249},
{15,0,248},
{17,0,248},
{18,0,247},
{19,0,247},
{20,0,246},
{22,0,246},
{23,0,245},
{24,0,245},
{26,0,244},
{27,0,243},
{28,0,243},
{29,0,242},
{31,0,242},
{32,0,241},
{33,0,241},
{35,0,240},
{36,0,240},
{37,0,239},
{38,0,239},
{40,0,238},
{41,0,237},
{42,0,237},
{44,0,236},
{45,0,236},
{46,0,235},
{47,0,235},
{49,0,234},
{50,0,234},
{51,0,233},
{52,0,232},
{54,0,232},
{55,0,231},
{56,0,231},
{58,0,230},
{59,0,230},
{60,0,229},
{61,0,229},
{63,0,228},
{64,0,228},
{65,0,227},
{67,0,226},
{68,0,226},
{69,0,225},
{70,0,225},
{72,0,224},
{73,0,224},
{74,0,223},
{76,0,223},
{77,0,222},
{78,0,221},
{79,0,221},
{81,0,220},
{82,0,220},
{83,0,219},
{255,255,255}, //bonus sparkle
//{84,0,219},
{86,0,218},
{87,0,218},
{88,0,217},
{90,0,217},
{91,0,216},
{92,0,215},
{93,0,215},
{95,0,214},
{96,0,214},
{255,255,255}, //TEST PIXEL
//{97,0,213}, 
{99,0,213},
{100,0,212},
{101,0,212},
{102,0,211},
{104,0,210},
{105,0,210},
{106,0,209},
{108,0,209},
{109,0,208},
{110,0,208},
{111,0,207},
{113,0,207},
{114,0,206},
{115,0,206},
{116,0,205},
{118,0,204},
{119,0,204},
{120,0,203},
{122,0,203},
{123,0,202},
{124,0,202},
{125,0,201},
{127,0,201}
};

uint8_t Smile[16][24] = {
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};

uint8_t SmileBlink[16][24] = {
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};

uint16_t redwave[16][24] = {   
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,179,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,125,255,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,87,97,50,10,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0},
{0,0,0,0,0,61,50,255,20,10,0,0,0,0,0,0,92,0,255,0,0,0,0,0},
{0,0,0,0,0,43,20,179,50,20,10,0,0,0,255,0,50,0,92,0,0,0,0,0},
{0,0,0,0,0,30,5,125,255,50,20,10,0,0,50,20,20,0,50,0,0,0,0,0},
{84,104,131,163,204,21,0,87,125,80,50,10,0,20,10,255,10,90,20,204,163,131,104,84},
{0,0,0,0,0,0,0,0,0,255,92,20,20,255,0,0,0,255,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,179,50,50,50,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,255,92,255,20,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,179,50,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};

uint16_t kitteh[16][24] = {
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0},
{0,0,0,0,1,0,0,1,1,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0},
{0,0,0,0,0,1,0,1,1,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0},
{0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0},
{0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};

uint16_t kitteh2[16][24] = {
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,1,0,0,1,1,1,0,0,0,1,1,1,0,0,1,0,0,0,0,0},
{0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0},
{0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0},
{0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};

uint16_t redwave2[16][24] = {
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,255,102,51,26,8,2,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,179,255,102,51,26,13,6,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,125,63,255,102,51,26,13,2,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,87,44,22,255,102,51,26,8,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,61,31,15,8,255,102,51,26,8,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,43,22,11,5,3,255,102,51,26,6,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,30,15,8,4,2,1,255,102,51,26,13,0,0,0,0,0,0,0,0},
{84,104,131,163,204,21,11,5,3,1,1,0,255,255,255,255,33,13,5,2,255,255,255,255},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,22,9,255,102,41,16,7},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,92,37,255,102,41,16,7,3},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,255,102,41,16,7,3,1},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,102,41,16,7,3,1,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};
// input pins

const uint8_t button1 = 19;
const uint8_t button2 = 22;
const uint8_t button3 = 23;
const uint8_t pot1 = 18;
const uint8_t batt = 8;
uint8_t buttonState = 0;
uint8_t lastButtonState = 0;
unsigned long lastDebounceTime = 0;  // the last time the output pin was toggled
unsigned long debounceDelay = 50;    // the debounce time; increase if the output flickers
int sensorValue = 0;
float voltage = 0; 
int reading = 0;
uint8_t fadeRate = 1;
uint8_t battstat = 2;
uint8_t bright = 10;  // LIMIT BRIGHTNESS! no smaller than 5 or so
int lastBeat = 0;
int beatFrame = 200;
int nFrames = 20; 
int color = 0;
int z = 0;
int sX = 0; 
int lastSX = 0;
int sY = 0;
int lastSY = 0;
int c = 0;
unsigned long frameCount=25500;
int pixelIndex = 0;
void plasma();
void buttons();
void blue();
void purple();

void setup()
{
  pinMode(13, OUTPUT);
  leds.begin();
  leds.show();
  pinMode(button1, INPUT);
  pinMode(button2, INPUT);
  pinMode(button3, INPUT);

// ears etc

 

}


void loop()
{
buttons();
pots();
switch (buttonState) {
    case 0:  //off


        
      break;
    case 1:
        blue();
      break;
    case 2:
        purple();
      break;
    case 3:
        red();
      break;
    case 4:
      plasma ();
    break;
     case 5:
      // smile
      smile(); 
    break;
    case 6:
    kittehz();
    break;

 
  }

}






